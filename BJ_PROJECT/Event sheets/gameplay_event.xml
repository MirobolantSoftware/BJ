<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>gameplay_event</name>
    <events>
        <variable constant="0" name="leaves_to_gather" sid="4124971492216877" static="0" type="number">20</variable>
        <variable constant="0" name="extra_leaves" sid="6199418136903446" static="0" type="number">10</variable>
        <variable constant="0" name="wind_frenquency" sid="5313750985314079" static="0" type="number">1</variable>
        <variable constant="0" name="wind_strength" sid="7471062143943426" static="0" type="number">100</variable>
        <variable constant="0" name="gathering_time" sid="1186340863994845" static="0" type="number">50</variable>
        <variable constant="0" name="wind_angle" sid="1649758596307856" static="0" type="number">0</variable>
        <variable constant="0" name="current_level" sid="20634626180249" static="0" type="number">0</variable>
        <variable constant="0" name="gathered_leaves" sid="901647731120211" static="0" type="number">0</variable>
        <variable constant="0" name="tree_max_leaves" sid="7990933118538347" static="0" type="number">10</variable>
        <variable constant="0" name="player_initial_speed" sid="1436122149838553" static="0" type="number">100</variable>
        <variable constant="0" name="player_initial_strenght" sid="6934100579935003" static="0" type="number">200</variable>
        <variable constant="0" name="player_extra_speed" sid="9239303754659467" static="0" type="number">0</variable>
        <variable constant="0" name="player_extra_cone" sid="6051817210786957" static="0" type="number">0</variable>
        <variable constant="0" name="player_initial_cone" sid="1955214890695693" static="0" type="number">100</variable>
        <variable constant="0" name="player_extra_strenght" sid="5156783865316722" static="0" type="number">0</variable>
        <comment>relative to missions</comment>
        <variable constant="0" name="meteo" sid="7728804994439365" static="0" type="number">0</variable>
        <variable constant="0" name="day" sid="4953308098708303" static="0" type="number">0</variable>
        <variable constant="0" name="mission" sid="567664679562758" static="0" type="number">0</variable>
        <event-group description="" sid="4346366776979778" title="Layout_start">
            <sub-events>
                <comment>COMMON TO ALL LAYOUTS</comment>
                <event-block sid="3403056490175807">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="1343450561796581" type="System" />
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="4" name="Set max speed" sid="9264252912721677" type="bob">
                            <param id="0" name="Max Speed">player_initial_speed+player_extra_speed</param>
                        </action>
                        <action behavior="LineOfSight" id="1" name="Set cone of view" sid="2959380196609063" type="machine">
                            <param id="0" name="Cone of view">player_initial_cone+player_extra_cone</param>
                        </action>
                        <action id="-10" name="Set value" sid="2244394016746663" type="machine">
                            <param id="0" name="Instance variable">blow_strength</param>
                            <param id="1" name="Value">player_initial_strenght+player_extra_strenght</param>
                        </action>
                        <action behavior="LineOfSight" id="1" name="Set cone of view" sid="7585531745000366" type="machine">
                            <param id="0" name="Cone of view">machine.blow_angle</param>
                        </action>
                        <action id="0" name="Play" sid="8955019686989309" type="Audio">
                            <param id="0" name="Audio file">blow</param>
                            <param id="2" name="Loop">1</param>
                            <param id="3" name="Volume">0</param>
                            <param id="1" name="Tag (optional)">&quot;blow&quot;</param>
                        </action>
                        <action id="2" name="Set muted" sid="9257776779916224" type="Audio">
                            <param id="0" name="Tag">&quot;blow&quot;</param>
                            <param id="1" name="State">0</param>
                        </action>
                        <action id="0" name="Set spraying" sid="9616635764710411" type="Particles">
                            <param id="0" name="State">0</param>
                        </action>
                        <action id="0" name="Play" sid="3122076372748101" type="Audio">
                            <param id="0" name="Audio file">next_level</param>
                            <param id="2" name="Loop">0</param>
                            <param id="3" name="Volume">0</param>
                            <param id="1" name="Tag (optional)">&quot;&quot;</param>
                        </action>
                    </actions>
                    <sub-events>
                        <comment>QG_LAYOUT</comment>
                        <event-block sid="1439890113743891">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="3227906412660034" type="System">
                                    <param id="0" name="First value">LayoutName</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">&quot;QG&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="6" name="Stop" sid="3864042272746819" type="Audio">
                                    <param id="0" name="Tag">&quot;music&quot;</param>
                                </action>
                                <action id="-9" name="Set value" sid="6412413459758073" type="System">
                                    <param id="0" name="Variable">meteo</param>
                                    <param id="1" name="Value">round(random(0,2))</param>
                                </action>
                                <action id="5" name="Set frame" sid="2581906402015267" type="meteo_pictos">
                                    <param id="0" name="Frame number">meteo</param>
                                </action>
                                <action id="0" name="Set text" sid="1003408817631016" type="Day">
                                    <param id="0" name="Text">&quot;DAY : &quot;&amp;day</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>STREET_LAYOUT</comment>
                        <event-block sid="8721994286396476">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="1518536312687475" type="System">
                                    <param id="0" name="First value">LayoutName</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">&quot;street&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="9536287523719741" type="System">
                                    <param id="0" name="Variable">leaves_to_gather</param>
                                    <param id="1" name="Value">20+(current_level*20)</param>
                                </action>
                                <action id="-9" name="Set value" sid="1443390896909894" type="System">
                                    <param id="0" name="Variable">wind_frenquency</param>
                                    <param id="1" name="Value">1+(current_level*2)</param>
                                </action>
                                <action id="-9" name="Set value" sid="1577302266587703" type="System">
                                    <param id="0" name="Variable">wind_strength</param>
                                    <param id="1" name="Value">100+(current_level*40)</param>
                                </action>
                                <action id="-9" name="Set value" sid="1617517912876396" type="System">
                                    <param id="0" name="Variable">gathering_time</param>
                                    <param id="1" name="Value">50+(current_level*10)</param>
                                </action>
                                <action id="-3" name="Set position" sid="6190375742546646" type="area">
                                    <param id="0" name="X">random((LayoutWidth/4),(LayoutWidth/4)*3)</param>
                                    <param id="1" name="Y">LayoutHeight/2</param>
                                </action>
                                <action id="-26" name="Move to layer" sid="4314937656542902" type="area">
                                    <param id="0" name="Layer">0</param>
                                </action>
                                <action behavior="Timer" id="0" name="Start timer" sid="5511434161902113" type="wind_control">
                                    <param id="0" name="Duration">3</param>
                                    <param id="1" name="Type">0</param>
                                    <param id="2" name="Tag">&quot;spawn_whirlwind&quot;</param>
                                </action>
                                <action behavior="Physics" id="12" name="Set world gravity" sid="3977022134575148" type="leaf">
                                    <param id="0" name="Gravity">0</param>
                                </action>
                                <action id="-7" name="Set size" sid="3998865079051799" type="area">
                                    <param id="0" name="Width">(sqrt(leaves_to_gather)*12)+15</param>
                                    <param id="1" name="Height">(sqrt(leaves_to_gather)*12)+15</param>
                                </action>
                                <action id="0" name="Set text" sid="5213709553620911" type="leaves">
                                    <param id="0" name="Text">&quot;leaves to left gather : &quot;&amp;leaves_to_gather-area.gathered_leaves</param>
                                </action>
                                <action behavior="Timer" id="0" name="Start timer" sid="1127537923601382" type="bob">
                                    <param id="0" name="Duration">gathering_time</param>
                                    <param id="1" name="Type">0</param>
                                    <param id="2" name="Tag">&quot;gathering_time&quot;</param>
                                </action>
                                <action behavior="Timer" id="0" name="Start timer" sid="4747829810404969" type="wind_control">
                                    <param id="0" name="Duration">3</param>
                                    <param id="1" name="Type">0</param>
                                    <param id="2" name="Tag">&quot;wind_blow&quot;</param>
                                </action>
                                <action id="0" name="Set text" sid="6494140115714416" type="Level">
                                    <param id="0" name="Text">&quot;Level : &quot;&amp;current_level</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="580212418642685">
                                    <conditions>
                                        <condition id="-14" name="Compare variable" sid="7105336300497335" type="System">
                                            <param id="0" name="Variable">current_level</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="6" name="Stop" sid="7602204231676122" type="Audio">
                                            <param id="0" name="Tag">&quot;music&quot;</param>
                                        </action>
                                        <action id="0" name="Play" sid="4392805029366987" type="Audio">
                                            <param id="0" name="Audio file">music_reverse</param>
                                            <param id="2" name="Loop">1</param>
                                            <param id="3" name="Volume">0</param>
                                            <param id="1" name="Tag (optional)">&quot;music&quot;</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>GENERATING LEAVES AND TREES</comment>
                                <event-block sid="9858512468154601">
                                    <conditions>
                                        <condition id="-12" name="Repeat" sid="2746065119957377" type="System">
                                            <param id="0" name="Count">floor((leaves_to_gather*(1/4))/tree.leaves_left)+1</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-3" name="Create object" sid="3819723325181561" type="System">
                                            <param id="0" name="Object to create">tree</param>
                                            <param id="1" name="Layer">2</param>
                                            <param id="2" name="X">random(tree.Width,LayoutWidth-tree.Width)</param>
                                            <param id="3" name="Y">random(tree.Height,LayoutHeight-tree.Height)</param>
                                        </action>
                                        <action behavior="Timer" id="0" name="Start timer" sid="3547047922849286" type="tree">
                                            <param id="0" name="Duration">random(0.5,2)</param>
                                            <param id="1" name="Type">1</param>
                                            <param id="2" name="Tag">&quot;leaf_spawn&quot;</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="2388600667917767">
                                            <conditions>
                                                <condition id="1" name="Is overlapping another object" sid="6759857180020341" type="area">
                                                    <param id="0" name="Object">tree</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Destroy" sid="7229645653106454" type="tree" />
                                                <action id="-3" name="Create object" sid="2759946397460869" type="System">
                                                    <param id="0" name="Object to create">tree</param>
                                                    <param id="1" name="Layer">2</param>
                                                    <param id="2" name="X">random(tree.Width,LayoutWidth-tree.Width)</param>
                                                    <param id="3" name="Y">random(tree.Height,LayoutHeight-tree.Height)</param>
                                                </action>
                                                <action behavior="Timer" id="0" name="Start timer" sid="2207870117399375" type="tree">
                                                    <param id="0" name="Duration">random(0.5,2)</param>
                                                    <param id="1" name="Type">1</param>
                                                    <param id="2" name="Tag">&quot;leaf_spawn&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <event-block sid="9121984214338473">
                                    <conditions>
                                        <condition id="-12" name="Repeat" sid="1711656449835419" type="System">
                                            <param id="0" name="Count">floor(leaves_to_gather*(3/4))+extra_leaves</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-3" name="Create object" sid="4773504841446232" type="System">
                                            <param id="0" name="Object to create">leaf</param>
                                            <param id="1" name="Layer">1</param>
                                            <param id="2" name="X">random(20,LayoutWidth-20)</param>
                                            <param id="3" name="Y">random(20,LayoutHeight-20)</param>
                                        </action>
                                        <action id="-18" name="Rotate clockwise" sid="6974987084281566" type="leaf">
                                            <param id="0" name="Degrees">random(360)</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="1902271823064575" title="Every_tick">
            <sub-events>
                <comment>COMMON TO ALL LAYOUTS</comment>
                <event-block sid="9560664685505618">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="6753704108113161" type="System" />
                    </conditions>
                    <actions>
                        <action disabled="1" id="-3" name="Set position" sid="922466683432999" type="Particles">
                            <param id="0" name="X">machine.X+30</param>
                            <param id="1" name="Y">machine.Y</param>
                        </action>
                        <action id="-4" name="Set position to another object" sid="1031223577205175" type="machine">
                            <param id="0" name="Object">bob</param>
                            <param id="1" name="Image point (optional)">1</param>
                        </action>
                        <action id="-8" name="Set angle" sid="4879524219048132" type="machine">
                            <param id="0" name="Angle">angle(machine.X,machine.Y,Mouse.X,Mouse.Y)</param>
                        </action>
                        <action id="-8" name="Set angle" sid="1615491184447703" type="Particles">
                            <param id="0" name="Angle">machine.Angle</param>
                        </action>
                        <action id="-4" name="Set position to another object" sid="1537073926580769" type="shot_point">
                            <param id="0" name="Object">machine</param>
                            <param id="1" name="Image point (optional)">1</param>
                        </action>
                        <action id="-4" name="Set position to another object" sid="6506047248944117" type="shadow">
                            <param id="0" name="Object">bob</param>
                            <param id="1" name="Image point (optional)">0</param>
                        </action>
                        <action id="-4" name="Set position to another object" sid="1210045930146287" type="Particles">
                            <param id="0" name="Object">machine</param>
                            <param id="1" name="Image point (optional)">1</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="8954243929343717">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="943943240093119" type="System">
                                    <param id="0" name="First value">bob.X-Mouse.X</param>
                                    <param id="1" name="Comparison">2</param>
                                    <param id="2" name="Second value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="8" name="Set flipped" sid="9248082131172509" type="machine">
                                    <param id="0" name="State">0</param>
                                </action>
                                <action id="8" name="Set flipped" sid="2123564145294537" type="bob">
                                    <param id="0" name="State">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="7793496137010374">
                            <conditions>
                                <condition id="-22" name="Else" sid="9870615962465959" type="System" />
                            </conditions>
                            <actions>
                                <action id="8" name="Set flipped" sid="248262149922977" type="machine">
                                    <param id="0" name="State">1</param>
                                </action>
                                <action id="8" name="Set flipped" sid="8866198823030108" type="bob">
                                    <param id="0" name="State">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="5201061500479233">
                            <conditions>
                                <condition behavior="8Direction" id="0" name="Is moving" sid="7119555032897693" type="bob" />
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="3588928183677258" type="bob">
                                    <param id="0" name="Animation">&quot;walk&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                                <action id="6" name="Set speed" sid="306807934049438" type="bob">
                                    <param id="0" name="Speed">10</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="6586297102882477">
                            <conditions>
                                <condition id="-22" name="Else" sid="6615884759706856" type="System" />
                            </conditions>
                            <actions>
                                <action id="2" name="Stop" sid="6209062926305954" type="bob" />
                                <action id="5" name="Set frame" sid="134806313493663" type="bob">
                                    <param id="0" name="Frame number">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>QG_LAYOUT</comment>
                        <event-block sid="8941012815657412">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="8930339842399214" type="System">
                                    <param id="0" name="First value">LayoutName</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">&quot;QG&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="5" name="Set frame" sid="3533365171985441" type="door">
                                    <param id="0" name="Frame number">0</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="9416860710143214">
                                    <conditions>
                                        <condition id="1" name="Is overlapping another object" sid="8059612582144222" type="door">
                                            <param id="0" name="Object">bob</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="5" name="Set frame" sid="6483955950947247" type="door">
                                            <param id="0" name="Frame number">1</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="6740910262090233">
                                            <conditions>
                                                <condition id="2" name="Key is down" sid="8230850634150116" type="Keyboard">
                                                    <param id="0" name="Key">32 (Espace)</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-2" name="Go to layout" sid="5360752409310413" type="System">
                                                    <param id="0" name="Layout">street</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>STREET_LAYOUT</comment>
                        <event-block sid="4793328039277487">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="9916656563718207" type="System">
                                    <param id="0" name="First value">LayoutName</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">&quot;street&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Physics" id="2" name="Apply force at angle" sid="4240455687756504" type="whirlwind">
                                    <param id="0" name="Force">random(0,round(wind_strength/10))</param>
                                    <param id="1" name="Angle">random(360)</param>
                                    <param id="2" name="Image point">0</param>
                                </action>
                                <action id="-8" name="Set angle" sid="6765987750251371" type="whirlwind">
                                    <param id="0" name="Angle">whirlwind.Angle-10</param>
                                </action>
                                <action behavior="Physics" id="2" name="Apply force at angle" sid="4472950559114699" type="leaf">
                                    <param id="0" name="Force">random(0,wind_control.wind_force)</param>
                                    <param id="1" name="Angle">random(wind_control.wind_angle-45,wind_control.wind_angle+45)</param>
                                    <param id="2" name="Image point">0</param>
                                </action>
                                <action id="0" name="Set text" sid="1833379975841073" type="leaves">
                                    <param id="0" name="Text">&quot;leaves to left gather : &quot;&amp;leaves_to_gather-area.gathered_leaves</param>
                                </action>
                                <action id="0" name="Set text" sid="58551085399506" type="tic_tac">
                                    <param id="0" name="Text">&quot;time left : &quot;&amp;round(gathering_time-bob.Timer.CurrentTime(&quot;gathering_time&quot;))</param>
                                </action>
                                <action id="4" name="Set font color" sid="6229151711287956" type="leaves">
                                    <param id="0" name="Color">rgb(100,255,0)</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="4121008819668252">
                                    <conditions>
                                        <condition id="-8" name="Is boolean instance variable set" sid="7519629061667505" type="leaf">
                                            <param id="0" name="Instance variable">flying</param>
                                        </condition>
                                        <condition behavior="Physics" id="1" name="Compare velocity" sid="1279556160033588" type="leaf">
                                            <param id="0" name="Which">2</param>
                                            <param id="1" name="Comparison">3</param>
                                            <param id="2" name="Value">100</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="4" name="Set animation" sid="1094827459209999" type="leaf">
                                            <param id="0" name="Animation">&quot;fall&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                        <action id="6" name="Set speed" sid="6436281916535454" type="leaf">
                                            <param id="0" name="Speed">25</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="9844291747583511">
                                    <conditions>
                                        <condition id="-8" name="Is boolean instance variable set" sid="9024467459042753" type="leaf">
                                            <param id="0" name="Instance variable">ontheground</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="4" name="Set animation" sid="9294544276521486" type="leaf">
                                            <param id="0" name="Animation">&quot;idle&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                        <action id="5" name="Set frame" sid="7804374859334036" type="leaf">
                                            <param id="0" name="Frame number">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="4842060713488663">
                                    <conditions>
                                        <condition id="1" name="Is overlapping another object" sid="8636829641032717" type="leaf">
                                            <param id="0" name="Object">area</param>
                                        </condition>
                                        <condition id="-8" name="Is boolean instance variable set" sid="2138792816767054" type="leaf">
                                            <param id="0" name="Instance variable">ontheground</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="9241009738693154" type="area">
                                            <param id="0" name="Instance variable">gathered_leaves</param>
                                            <param id="1" name="Value">leaf.PickedCount</param>
                                        </action>
                                        <action id="0" name="Set text" sid="908522012322521" type="leaves">
                                            <param id="0" name="Text">&quot;leaves to left gather : &quot;&amp;leaves_to_gather-area.gathered_leaves</param>
                                        </action>
                                        <action id="4" name="Set animation" sid="8070841523537199" type="leaf">
                                            <param id="0" name="Animation">&quot;ilde&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                        <action id="5" name="Set frame" sid="8108294155714964" type="leaf">
                                            <param id="0" name="Frame number">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="2814878824621015">
                                    <conditions>
                                        <condition id="-8" name="Is boolean instance variable set" sid="4917353104370514" type="wind_control">
                                            <param id="0" name="Instance variable">blowing</param>
                                        </condition>
                                        <condition id="-7" name="Compare instance variable" sid="5261584397529407" type="wind_control">
                                            <param id="0" name="Instance variable">wind_force</param>
                                            <param id="1" name="Comparison">2</param>
                                            <param id="2" name="Value">wind_strength/10</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-11" name="Add to" sid="7087183804033541" type="wind_control">
                                            <param id="0" name="Instance variable">wind_force</param>
                                            <param id="1" name="Value">0.0001</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="8793721200267511">
                                    <conditions>
                                        <condition id="-9" name="Is visible" sid="4843029264794587" type="leaf" />
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Set text" sid="7674366204979874" type="Level">
                                            <param id="0" name="Text">&quot;Level : &quot;&amp;current_level</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="1155689290913149">
                                    <conditions>
                                        <condition behavior="Physics" id="1" name="Compare velocity" sid="6770552119826892" type="leaf">
                                            <param id="0" name="Which">2</param>
                                            <param id="1" name="Comparison">4</param>
                                            <param id="2" name="Value">400</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="4" name="Set animation" sid="8140251351653224" type="leaf">
                                            <param id="0" name="Animation">&quot;fly&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                        <action id="-13" name="Set boolean" sid="2083087955692384" type="leaf">
                                            <param id="0" name="Instance variable">ontheground</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                        <action id="6" name="Set speed" sid="3626178302384364" type="leaf">
                                            <param id="0" name="Speed">25</param>
                                        </action>
                                        <action id="-13" name="Set boolean" sid="9759000350780726" type="leaf">
                                            <param id="0" name="Instance variable">flying</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="3981588483973215">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="6100446613112972" type="System">
                                            <param id="0" name="First value">gathering_time-bob.Timer.CurrentTime(&quot;gathering_time&quot;)</param>
                                            <param id="1" name="Comparison">2</param>
                                            <param id="2" name="Second value">10</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="4" name="Set font color" sid="3423429440811794" type="leaves">
                                            <param id="0" name="Color">rgb(255, 0, 0)</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="5393366436694125">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="1492183868833353" type="System">
                                            <param id="0" name="First value">gathering_time-bob.Timer.CurrentTime(&quot;gathering_time&quot;)</param>
                                            <param id="1" name="Comparison">2</param>
                                            <param id="2" name="Second value">gathering_time/2</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="4" name="Set font color" sid="1537706683029665" type="leaves">
                                            <param id="0" name="Color">rgb(255, 100, 0)</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="780936173470892" title="Mouse">
            <sub-events>
                <event-block sid="5951046927147907">
                    <conditions>
                        <condition id="2" name="Mouse button is down" sid="6978831970628208" type="Mouse">
                            <param id="0" name="Mouse button">0</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="2597302174419889" type="machine">
                            <param id="0" name="Instance variable">blow_force</param>
                            <param id="1" name="Comparison">2</param>
                            <param id="2" name="Value">machine.blow_strength</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-11" name="Add to" sid="8120586517836354" type="machine">
                            <param id="0" name="Instance variable">blow_force</param>
                            <param id="1" name="Value">10</param>
                        </action>
                        <action id="0" name="Set spraying" sid="8053575168861156" type="Particles">
                            <param id="0" name="State">1</param>
                        </action>
                        <action id="2" name="Set spray cone" sid="9235256760493999" type="Particles">
                            <param id="0" name="Spray cone">machine.LineOfSight.ConeOfView</param>
                        </action>
                        <action id="4" name="Set speed" sid="6100478001532725" type="Particles">
                            <param id="0" name="Speed">machine.blow_force</param>
                        </action>
                        <action id="1" name="Set rate" sid="1520169138353419" type="Particles">
                            <param id="0" name="Rate">machine.blow_force/2</param>
                        </action>
                        <action id="2" name="Set muted" sid="4343680768224238" type="Audio">
                            <param id="0" name="Tag">&quot;blow&quot;</param>
                            <param id="1" name="State">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="914321664421872">
                    <conditions>
                        <condition id="3" name="On button released" sid="3421335050504567" type="Mouse">
                            <param id="0" name="Mouse button">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="806888285437898" type="machine">
                            <param id="0" name="Instance variable">blow_force</param>
                            <param id="1" name="Value">0</param>
                        </action>
                        <action id="0" name="Set spraying" sid="5859671607877343" type="Particles">
                            <param id="0" name="State">0</param>
                        </action>
                        <action id="2" name="Set muted" sid="6046429288541884" type="Audio">
                            <param id="0" name="Tag">&quot;blow&quot;</param>
                            <param id="1" name="State">0</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="8211832936336397">
                    <conditions>
                        <condition id="2" name="Mouse button is down" sid="5213281927365378" type="Mouse">
                            <param id="0" name="Mouse button">0</param>
                        </condition>
                        <condition id="-11" name="For Each" sid="3470752194341916" type="System">
                            <param id="0" name="Object">leaf</param>
                        </condition>
                        <condition id="-8" name="Compare two values" sid="194020633903703" type="System">
                            <param id="0" name="First value">distance(leaf.X,leaf.Y,machine.X,machine.Y)</param>
                            <param id="1" name="Comparison">2</param>
                            <param id="2" name="Second value">100</param>
                        </condition>
                        <condition behavior="LineOfSight" id="0" name="Has LOS to object" sid="8495485504304103" type="machine">
                            <param id="0" name="Object">leaf</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Physics" id="2" name="Apply force at angle" sid="5804686584118997" type="leaf">
                            <param id="0" name="Force">machine.blow_force/distance(leaf.X,leaf.Y,shot_point.X,shot_point.Y)</param>
                            <param id="1" name="Angle">angle(shot_point.X,shot_point.Y,Mouse.X,Mouse.Y)</param>
                            <param id="2" name="Image point">0</param>
                        </action>
                        <action disabled="1" id="-25" name="Move to bottom" sid="4199603271093007" type="leaf" />
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="9364337639234175" title="TREES">
            <sub-events>
                <event-block sid="5727606253579663">
                    <conditions>
                        <condition behavior="Timer" id="0" name="On timer" sid="5590021247149894" type="tree">
                            <param id="0" name="Tag">&quot;leaf_spawn&quot;</param>
                        </condition>
                        <condition id="-11" name="For Each" sid="9079116990662184" type="System">
                            <param id="0" name="Object">tree</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="7526691690783284" type="tree">
                            <param id="0" name="Instance variable">leaves_left</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-3" name="Create object" sid="2211039226543196" type="System">
                            <param id="0" name="Object to create">leaf</param>
                            <param id="1" name="Layer">1</param>
                            <param id="2" name="X">tree.X + random(-tree.Width/2,tree.Width/2)</param>
                            <param id="3" name="Y">tree.Y+ random(-tree.Height/2,-tree.Height/2)</param>
                        </action>
                        <action id="-12" name="Subtract from" sid="6297464654263124" type="tree">
                            <param id="0" name="Instance variable">leaves_left</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="4" name="Set animation" sid="8762340756983924" type="tree">
                            <param id="0" name="Animation">&quot;spawn_leaf&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="7371764408680259" title="WIND">
            <sub-events>
                <event-block sid="3363265204615632">
                    <conditions>
                        <condition behavior="Timer" id="0" name="On timer" sid="2924896641679911" type="wind_control">
                            <param id="0" name="Tag">&quot;spawn_whirlwind&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-3" name="Create object" sid="2310834485215187" type="System">
                            <param id="0" name="Object to create">whirlwind</param>
                            <param id="1" name="Layer">1</param>
                            <param id="2" name="X">random(-100,LayoutWidth)</param>
                            <param id="3" name="Y">random(100,LayoutHeight-100)</param>
                        </action>
                        <action behavior="Fade" id="0" name="Restart fade" sid="9427398368553467" type="whirlwind" />
                        <action behavior="Fade" id="2" name="Set fade-in time" sid="6405546474706515" type="whirlwind">
                            <param id="0" name="Fade-in time">2</param>
                        </action>
                        <action behavior="Fade" id="4" name="Set fade-out time" sid="6391538732577779" type="whirlwind">
                            <param id="0" name="Fade-out time">2</param>
                        </action>
                        <action behavior="Fade" id="1" name="Start fade" sid="107465937838007" type="whirlwind" />
                        <action behavior="Timer" id="0" name="Start timer" sid="1330366293911079" type="wind_control">
                            <param id="0" name="Duration">random(10/wind_frenquency,5/wind_frenquency)</param>
                            <param id="1" name="Type">0</param>
                            <param id="2" name="Tag">&quot;spawn_whirlwind&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="6847911854466588">
                    <conditions>
                        <condition id="-18" name="On created" sid="2568757251523677" type="whirlwind" />
                    </conditions>
                    <actions>
                        <action behavior="Physics" id="2" name="Apply force at angle" sid="6640153032416035" type="whirlwind">
                            <param id="0" name="Force">random(0,round(wind_strength))</param>
                            <param id="1" name="Angle">random(360)</param>
                            <param id="2" name="Image point">0</param>
                        </action>
                        <action id="-7" name="Set size" sid="4433919562210387" type="whirlwind">
                            <param id="0" name="Width">random(50,wind_strength/2)</param>
                            <param id="1" name="Height">random(50,wind_strength/2)</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="1110425693723434">
                    <conditions>
                        <condition behavior="Fade" id="0" name="On fade-out finished" sid="6888472063634298" type="whirlwind" />
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="9238057387959826" type="whirlwind" />
                    </actions>
                </event-block>
                <event-block sid="8376576035066341">
                    <conditions>
                        <condition behavior="Timer" id="0" name="On timer" sid="1746393583705246" type="wind_control">
                            <param id="0" name="Tag">&quot;wind_blow&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="5209124531206443" type="wind_control">
                            <param id="0" name="Instance variable">wind_angle</param>
                            <param id="1" name="Value">random(360)</param>
                        </action>
                        <action behavior="Timer" id="0" name="Start timer" sid="9962617630418113" type="wind_control">
                            <param id="0" name="Duration">random(3,10/wind_frenquency)</param>
                            <param id="1" name="Type">0</param>
                            <param id="2" name="Tag">&quot;wind_blow&quot;</param>
                        </action>
                        <action id="-14" name="Toggle boolean" sid="2265170911862305" type="wind_control">
                            <param id="0" name="Instance variable">blowing</param>
                        </action>
                        <action id="-10" name="Set value" sid="2016352170421657" type="wind_control">
                            <param id="0" name="Instance variable">wind_force</param>
                            <param id="1" name="Value">0</param>
                        </action>
                        <action disabled="1" id="0" name="Play" sid="540544762957454" type="Audio">
                            <param id="0" name="Audio file">wind</param>
                            <param id="2" name="Loop">0</param>
                            <param id="3" name="Volume">-5</param>
                            <param id="1" name="Tag (optional)">&quot;&quot;</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="7644405536857463">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="9843504202336132" type="wind_control">
                                    <param id="0" name="Instance variable">blowing</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Timer" id="0" name="Start timer" sid="9689148878675829" type="wind_control">
                                    <param id="0" name="Duration">random(10,30/wind_frenquency)</param>
                                    <param id="1" name="Type">0</param>
                                    <param id="2" name="Tag">&quot;wind_blow&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="4321098401298293" title="LEAVES">
            <sub-events>
                <event-block sid="5166584974560413">
                    <conditions>
                        <condition id="-18" name="On created" sid="9053522191322434" type="leaf" />
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="9315073349702823" type="leaf">
                            <param id="0" name="Animation">&quot;fall&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                        <action id="6" name="Set speed" sid="2307342163169298" type="leaf">
                            <param id="0" name="Speed">25</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="5059687536851119" type="leaf">
                            <param id="0" name="Instance variable">ontheground</param>
                            <param id="1" name="Value">0</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="7718548890294352" type="leaf">
                            <param id="0" name="Instance variable">flying</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="6540116344635021">
                    <conditions>
                        <condition id="4" name="On finished" sid="3712563464807721" type="leaf">
                            <param id="0" name="Animation">&quot;fall&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-18" name="Rotate clockwise" sid="87726603180737" type="leaf">
                            <param id="0" name="Degrees">random(360)</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="7981520458710583" type="leaf">
                            <param id="0" name="Instance variable">ontheground</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="3881360266669133" type="leaf">
                            <param id="0" name="Instance variable">flying</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="2995182819988984" title="BONUS">
            <sub-events>
                <event-block sid="3749947881355509">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="7607763806706214" type="speed_bonus">
                            <param id="0" name="Object">bob</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="6468897663376608" type="System">
                            <param id="0" name="Variable">player_extra_speed</param>
                            <param id="1" name="Value">player_extra_speed+20</param>
                        </action>
                        <action id="-9" name="Destroy" sid="1842317801999197" type="speed_bonus" />
                        <action id="-9" name="Destroy" sid="1572961565055444" type="blow_force_bonus" />
                        <action id="-9" name="Destroy" sid="3211814007849927" type="cone_bonus" />
                        <action id="0" name="Play" sid="6726174448533691" type="Audio">
                            <param id="0" name="Audio file">speed_bonus</param>
                            <param id="2" name="Loop">0</param>
                            <param id="3" name="Volume">0</param>
                            <param id="1" name="Tag (optional)">&quot;&quot;</param>
                        </action>
                        <action id="6" name="Set speed" sid="6958304121945604" type="bob">
                            <param id="0" name="Speed">bob.AnimationSpeed+player_extra_speed</param>
                        </action>
                        <action behavior="8Direction" id="4" name="Set max speed" sid="4505217762583122" type="bob">
                            <param id="0" name="Max Speed">bob.8Direction.Speed+player_extra_speed</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="6861501323462391">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="9592226259075226" type="cone_bonus">
                            <param id="0" name="Object">bob</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="9035384118426773" type="System">
                            <param id="0" name="Variable">player_extra_cone</param>
                            <param id="1" name="Value">player_extra_cone+20</param>
                        </action>
                        <action id="-9" name="Destroy" sid="9744222212164453" type="speed_bonus" />
                        <action id="-9" name="Destroy" sid="3708183877279516" type="blow_force_bonus" />
                        <action id="-9" name="Destroy" sid="9756240078456841" type="cone_bonus" />
                        <action id="0" name="Play" sid="392507592564844" type="Audio">
                            <param id="0" name="Audio file">cone_bonus</param>
                            <param id="2" name="Loop">0</param>
                            <param id="3" name="Volume">0</param>
                            <param id="1" name="Tag (optional)">&quot;&quot;</param>
                        </action>
                        <action behavior="LineOfSight" id="1" name="Set cone of view" sid="8857600020091966" type="machine">
                            <param id="0" name="Cone of view">machine.LineOfSight.ConeOfView+player_extra_cone</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="3033896935765497">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="8038958828737428" type="blow_force_bonus">
                            <param id="0" name="Object">bob</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="1758445066767603" type="System">
                            <param id="0" name="Variable">player_extra_strenght</param>
                            <param id="1" name="Value">player_extra_strenght+20</param>
                        </action>
                        <action id="-9" name="Destroy" sid="8780109373022677" type="speed_bonus" />
                        <action id="-9" name="Destroy" sid="1269882710216981" type="blow_force_bonus" />
                        <action id="-9" name="Destroy" sid="3319755382273153" type="cone_bonus" />
                        <action id="0" name="Play" sid="3511204936857865" type="Audio">
                            <param id="0" name="Audio file">force_bonus</param>
                            <param id="2" name="Loop">0</param>
                            <param id="3" name="Volume">0</param>
                            <param id="1" name="Tag (optional)">&quot;&quot;</param>
                        </action>
                        <action id="-10" name="Set value" sid="3831428563910417" type="machine">
                            <param id="0" name="Instance variable">blow_strength</param>
                            <param id="1" name="Value">machine.blow_strength+player_extra_strenght</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="1929029071192703" title="WIN-LOOSE">
            <sub-events>
                <event-block sid="7227351935250912">
                    <conditions>
                        <condition id="-8" name="Compare two values" sid="2968699953126259" type="System">
                            <param id="0" name="First value">LayoutName</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Second value">&quot;street&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block any="1" sid="6703703461557965">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="4177931203541477" type="area">
                                    <param id="0" name="Instance variable">gathered_leaves</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Value">leaves_to_gather</param>
                                </condition>
                                <condition id="2" name="Key is down" sid="7496765927316952" type="Keyboard">
                                    <param id="0" name="Key">78 (N)</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Add to" sid="630240828920159" type="System">
                                    <param id="0" name="Variable">current_level</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="-26" name="Restart layout" sid="7386735944041074" type="System" />
                                <action id="0" name="Play" sid="9059471978123017" type="Audio">
                                    <param id="0" name="Audio file">next_level</param>
                                    <param id="2" name="Loop">0</param>
                                    <param id="3" name="Volume">0</param>
                                    <param id="1" name="Tag (optional)">&quot;&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="433137860642284">
                            <conditions>
                                <condition id="-14" name="Compare variable" sid="280748841731476" type="System">
                                    <param id="0" name="Variable">current_level</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">3</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-2" name="Go to layout" sid="9063931723662745" type="System">
                                    <param id="0" name="Layout">QG</param>
                                </action>
                                <action id="-9" name="Set value" sid="6076703897408967" type="System">
                                    <param id="0" name="Variable">day</param>
                                    <param id="1" name="Value">day+1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="3261399489011892" title="DOORS">
            <sub-events>
                <event-block disabled="1" sid="8337920450623871">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="8200283680848046" type="door">
                            <param id="0" name="Object">bob</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="5" name="Set frame" sid="3244011441207857" type="door">
                            <param id="0" name="Frame number">1</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block disabled="1" sid="5129952125001691">
                            <conditions>
                                <condition id="2" name="Key is down" sid="7892240280396324" type="Keyboard">
                                    <param id="0" name="Key">32 (Espace)</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-2" name="Go to layout" sid="8432502678991932" type="System">
                                    <param id="0" name="Layout">street</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="1780291525562009" title="INPUTS">
            <sub-events>
                <event-block sid="617247378752002">
                    <conditions>
                        <condition id="2" name="Key is down" sid="7293502813653313" type="Keyboard">
                            <param id="0" name="Key">90 (Z)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="4925935447864703" type="bob">
                            <param id="0" name="Control">2</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="8327547904359521">
                    <conditions>
                        <condition id="2" name="Key is down" sid="3802229007302825" type="Keyboard">
                            <param id="0" name="Key">83 (S)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="3832236102885289" type="bob">
                            <param id="0" name="Control">3</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="4046722844557789">
                    <conditions>
                        <condition id="2" name="Key is down" sid="2983704130845058" type="Keyboard">
                            <param id="0" name="Key">68 (D)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="9803719954049148" type="bob">
                            <param id="0" name="Control">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="383479236082904">
                    <conditions>
                        <condition id="2" name="Key is down" sid="3571014226592341" type="Keyboard">
                            <param id="0" name="Key">81 (Q)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="4372106515516448" type="bob">
                            <param id="0" name="Control">0</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
